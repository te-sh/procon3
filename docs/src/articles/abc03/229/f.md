---
title: "ABC #229 F"
url: https://atcoder.jp/contests/abc229/tasks/abc229_f
---
頂点を赤と青に塗り分けて, 同じ色の辺の重みを最小にすることを考える. 頂点 $0$ を赤としても一般性を失わない.

頂点 $1$ と頂点 $N$ を結ぶ辺を一旦無視して, 頂点 $i$ まで塗ったときに頂点 $1$ の色が $j$, 頂点 $i$ の色が $k$ であるときの同じ色の辺の重みの和の最小値を $dp[i][j][k]$ とする. このとき, $i \geq 3$ について

$$
\begin{align*}
dp[i][j][R] &= \min \{ dp[i-1][j][B], dp[i-1][j][R] + B_{i-1} \} + A_i \\
dp[i][j][B] &= \min \{ dp[i-1][j][R], dp[i-1][j][B] + B_{i-1} \}
\end{align*}
$$

となる. これを計算し, 最後に頂点 $1$ と頂点 $N$ の辺を考慮して

$$
\min \{ dp[N][R][R] + B_N, dp[N][R][B], dp[N][B][R], dp[N][B][B] + B_N \}
$$

が答えとなる.
