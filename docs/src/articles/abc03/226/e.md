---
title: "ABC #226 E"
url: https://atcoder.jp/contests/abc226/tasks/abc226_e
---
グラフは連結成分ごとに考える.

各頂点から他の頂点へ向かう辺は $1$ 本だけなので, 頂点の数と辺の数は一致していなければならない. また, 頂点の数が $2$ 以下であれば辺の数と頂点の数を一致させることができないので, 頂点の数は $3$ 以上でなければならない.

頂点の数と辺の数が一致しているので, このグラフは木に辺を $1$ つ追加したものである. すなわち, ループを $1$ つだけ持つ. このループの向きだけが自由度があり, 他の辺の向きは固定であるので, 向きの付け方は $2$ 通りである.

よって, 連結成分の数を $F$ として, 連結成分がすべて頂点の数と辺の数が一致しており, 頂点数が $3$ 以上であれば $2^F$ 通り, そうでなければ $0$ 通りである.
